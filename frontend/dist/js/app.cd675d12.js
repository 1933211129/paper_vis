(function(){"use strict";var a={9261:function(a,s,e){var t=e(5130),l=e(6768);const n={id:"app"};function i(a,s,e,t,i,d){const o=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(o)])}var d={name:"App"},o=e(1241);const r=(0,o.A)(d,[["render",i]]);var u=r,c=e(1387),v=e(4232);const p={class:"home"},h={class:"status-card"},b={class:"action-card"};function k(a,s,e,t,n,i){const d=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",p,[s[6]||(s[6]=(0,l.Lk)("h1",null,"📚 学术论文智能分析系统",-1)),(0,l.Lk)("div",h,[s[2]||(s[2]=(0,l.Lk)("h2",null,"后端状态",-1)),(0,l.Lk)("p",null,[s[1]||(s[1]=(0,l.eW)("状态: ",-1)),(0,l.Lk)("span",{class:(0,v.C4)(i.statusClass)},(0,v.v_)(a.backendStatus),3)]),(0,l.Lk)("button",{onClick:s[0]||(s[0]=(...a)=>i.checkStatus&&i.checkStatus(...a)),class:"check-btn"},"检查状态")]),(0,l.Lk)("div",b,[s[4]||(s[4]=(0,l.Lk)("h2",null,"🚀 开始分析",-1)),s[5]||(s[5]=(0,l.Lk)("p",null,"上传包含论文文件的文件夹，开始智能分析",-1)),(0,l.bF)(d,{to:"/upload",class:"upload-btn"},{default:(0,l.k6)(()=>[...s[3]||(s[3]=[(0,l.eW)(" 📁 上传文件夹 ",-1)])]),_:1})]),s[7]||(s[7]=(0,l.Lk)("div",{class:"info-card"},[(0,l.Lk)("h2",null,"📋 项目信息"),(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,"前端: Vue 3 + Vue Router + Vuex"),(0,l.Lk)("li",null,"后端: Django 4.2 + 论文分析模块"),(0,l.Lk)("li",null,"容器化: Docker + Docker Compose"),(0,l.Lk)("li",null,"开发端口: 前端 8022, 后端 8021"),(0,l.Lk)("li",null,"功能: 摘要分析、内容泳道划分、图表映射")])],-1))])}var g=e(782),f={name:"HomePage",computed:{...(0,g.aH)(["backendStatus"]),statusClass(){return{"status-ok":"ok"===this.backendStatus,"status-error":"error"===this.backendStatus,"status-unknown":"unknown"===this.backendStatus}}},methods:{...(0,g.i0)(["checkBackendStatus"]),checkStatus(){this.checkBackendStatus()}},mounted(){console.log("Home component mounted, checking backend status..."),this.checkBackendStatus()}};const y=(0,o.A)(f,[["render",k],["__scopeId","data-v-6d7d8c55"]]);var m=y;const L={class:"about"};function R(a,s,e,t,n,i){return(0,l.uX)(),(0,l.CE)("div",L,[...s[0]||(s[0]=[(0,l.Fv)('<h1 data-v-77a78077>关于项目</h1><div class="content" data-v-77a78077><h2 data-v-77a78077>技术栈</h2><div class="tech-stack" data-v-77a78077><div class="tech-item" data-v-77a78077><h3 data-v-77a78077>前端</h3><ul data-v-77a78077><li data-v-77a78077>Vue 3</li><li data-v-77a78077>Vue Router</li><li data-v-77a78077>Vuex</li><li data-v-77a78077>Axios</li></ul></div><div class="tech-item" data-v-77a78077><h3 data-v-77a78077>后端</h3><ul data-v-77a78077><li data-v-77a78077>Django 4.2</li><li data-v-77a78077>Python 3.11</li><li data-v-77a78077>SQLite</li></ul></div><div class="tech-item" data-v-77a78077><h3 data-v-77a78077>容器化</h3><ul data-v-77a78077><li data-v-77a78077>Docker</li><li data-v-77a78077>Docker Compose</li><li data-v-77a78077>Node.js 18 Alpine</li><li data-v-77a78077>Python 3.11 Slim</li></ul></div></div><h2 data-v-77a78077>项目特性</h2><ul class="features" data-v-77a78077><li data-v-77a78077>前后端分离架构</li><li data-v-77a78077>Docker容器化开发环境</li><li data-v-77a78077>热重载开发体验</li><li data-v-77a78077>代码实时同步</li><li data-v-77a78077>跨平台兼容（支持M4芯片）</li></ul></div>',2)])])}var _={name:"AboutPage"};const S=(0,o.A)(_,[["render",R],["__scopeId","data-v-77a78077"]]);var C=S;const F={class:"single-page"},w={class:"main-container"},E={class:"left-panel"},P={class:"features-section"},A={class:"features-grid"},D={class:"feature-icon"},I={class:"feature-content"},O={class:"feature-title"},j={class:"feature-desc"},X={class:"right-panel"},T={class:"upload-container"},x={key:0,class:"upload-progress"},z={class:"progress-header"},Q={class:"progress-text"},q={class:"progress-bar"},B={class:"progress-detail"},U={class:"result-icon"},$={key:2,class:"analysis-progress"},W={class:"analysis-text"},V={class:"result-icon"},H={key:0,class:"result-details"},M={key:0,class:"generated-files"},K={class:"action-buttons"},N=["disabled"];function G(a,s,e,n,i,d){return(0,l.uX)(),(0,l.CE)("div",F,[s[22]||(s[22]=(0,l.Lk)("div",{class:"page-background"},[(0,l.Lk)("div",{class:"background-particles"})],-1)),(0,l.Lk)("div",w,[(0,l.Lk)("div",E,[s[9]||(s[9]=(0,l.Fv)('<div class="title-section" data-v-bdebd79a><div class="system-badge" data-v-bdebd79a><span class="badge-icon" data-v-bdebd79a>🚀</span><span data-v-bdebd79a>基于大语言模型的智能分析系统</span></div><h1 class="main-title" data-v-bdebd79a> 学术论文 <span class="gradient-text" data-v-bdebd79a>智能分析</span> 系统 </h1><p class="main-description" data-v-bdebd79a> 自动解析学术论文内容，提取关键信息，生成结构化数据 <br data-v-bdebd79a>支持摘要语步分析、内容分区划分、图表映射等核心功能 </p></div>',1)),(0,l.Lk)("div",P,[s[8]||(s[8]=(0,l.Lk)("h3",{class:"section-title"},"核心功能",-1)),(0,l.Lk)("div",A,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.features,a=>((0,l.uX)(),(0,l.CE)("div",{class:"feature-item",key:a.id},[(0,l.Lk)("div",D,(0,v.v_)(a.icon),1),(0,l.Lk)("div",I,[(0,l.Lk)("h4",O,(0,v.v_)(a.title),1),(0,l.Lk)("p",j,(0,v.v_)(a.description),1)])]))),128))])]),s[10]||(s[10]=(0,l.Fv)('<div class="stats-section" data-v-bdebd79a><div class="stat-item" data-v-bdebd79a><div class="stat-number" data-v-bdebd79a>9</div><div class="stat-label" data-v-bdebd79a>标准化输出文件</div></div><div class="stat-item" data-v-bdebd79a><div class="stat-number" data-v-bdebd79a>5</div><div class="stat-label" data-v-bdebd79a>内容分区分析</div></div><div class="stat-item" data-v-bdebd79a><div class="stat-number" data-v-bdebd79a>∞</div><div class="stat-label" data-v-bdebd79a>并发处理能力</div></div></div>',1))]),(0,l.Lk)("div",X,[(0,l.Lk)("div",T,[s[21]||(s[21]=(0,l.Lk)("div",{class:"upload-header"},[(0,l.Lk)("h2",{class:"upload-title"},"开始分析"),(0,l.Lk)("p",{class:"upload-subtitle"},"上传您的论文文件夹，开始智能分析之旅")],-1)),(0,l.Lk)("div",{class:(0,v.C4)(["upload-area",{dragover:i.isDragOver}]),onDrop:s[0]||(s[0]=(...a)=>d.handleDrop&&d.handleDrop(...a)),onDragover:s[1]||(s[1]=(0,t.D$)(a=>i.isDragOver=!0,["prevent"])),onDragleave:s[2]||(s[2]=a=>i.isDragOver=!1),onClick:s[3]||(s[3]=(...a)=>d.triggerFileInput&&d.triggerFileInput(...a))},[...s[11]||(s[11]=[(0,l.Fv)('<div class="upload-content" data-v-bdebd79a><div class="upload-icon" data-v-bdebd79a>📂</div><h3 data-v-bdebd79a>选择论文文件夹</h3><p data-v-bdebd79a>点击选择或拖拽文件夹到此处</p><div class="file-requirements" data-v-bdebd79a><div class="requirement-title" data-v-bdebd79a>文件夹应包含：</div><div class="requirement-list" data-v-bdebd79a><div class="requirement-item" data-v-bdebd79a><span class="file-icon" data-v-bdebd79a>📄</span><span data-v-bdebd79a>*.md 文件</span></div><div class="requirement-item" data-v-bdebd79a><span class="file-icon" data-v-bdebd79a>📋</span><span data-v-bdebd79a>*content_list.json</span></div><div class="requirement-item" data-v-bdebd79a><span class="file-icon" data-v-bdebd79a>📊</span><span data-v-bdebd79a>*middle.json</span></div><div class="requirement-item" data-v-bdebd79a><span class="file-icon" data-v-bdebd79a>🖼️</span><span data-v-bdebd79a>image/ 文件夹</span></div></div></div></div>',1)])],34),(0,l.Lk)("input",{ref:"fileInput",type:"file",webkitdirectory:"",directory:"",multiple:"",onChange:s[4]||(s[4]=(...a)=>d.handleFileSelect&&d.handleFileSelect(...a)),style:{display:"none"}},null,544),i.uploading?((0,l.uX)(),(0,l.CE)("div",x,[(0,l.Lk)("div",z,[s[12]||(s[12]=(0,l.Lk)("h4",null,"📤 正在上传文件夹...",-1)),(0,l.Lk)("span",Q,(0,v.v_)(i.uploadProgress)+"%",1)]),(0,l.Lk)("div",q,[(0,l.Lk)("div",{class:"progress-fill",style:(0,v.Tr)({width:i.uploadProgress+"%"})},null,4)]),(0,l.Lk)("p",B,(0,v.v_)(i.uploadStatus),1)])):(0,l.Q3)("",!0),i.uploadResult?((0,l.uX)(),(0,l.CE)("div",{key:1,class:(0,v.C4)(["upload-result-simple",i.uploadResult.success?"success":"error"])},[(0,l.Lk)("div",U,(0,v.v_)(i.uploadResult.success?"✅":"❌"),1),(0,l.Lk)("span",null,(0,v.v_)(i.uploadResult.success?"上传成功！":"上传失败"),1)],2)):(0,l.Q3)("",!0),i.analyzing?((0,l.uX)(),(0,l.CE)("div",$,[s[13]||(s[13]=(0,l.Lk)("div",{class:"analysis-spinner"},null,-1)),s[14]||(s[14]=(0,l.Lk)("h4",null,"🔍 正在分析论文...",-1)),(0,l.Lk)("p",W,(0,v.v_)(i.analysisStatus),1)])):(0,l.Q3)("",!0),i.analysisResult?((0,l.uX)(),(0,l.CE)("div",{key:3,class:(0,v.C4)(["analysis-result",i.analysisResult.success?"success":"error"])},[(0,l.Lk)("div",V,(0,v.v_)(i.analysisResult.success?"🎉":"❌"),1),(0,l.Lk)("h4",null,(0,v.v_)(i.analysisResult.success?"分析完成！":"分析失败"),1),(0,l.Lk)("p",null,(0,v.v_)(i.analysisResult.message),1),i.analysisResult.success&&i.analysisResult.analysisResult?((0,l.uX)(),(0,l.CE)("div",H,[(0,l.Lk)("p",null,[s[15]||(s[15]=(0,l.Lk)("strong",null,"处理耗时：",-1)),(0,l.eW)((0,v.v_)(i.analysisResult.analysisResult.total_time.toFixed(2))+"秒",1)]),(0,l.Lk)("p",null,[s[16]||(s[16]=(0,l.Lk)("strong",null,"生成文件：",-1)),(0,l.eW)((0,v.v_)(i.analysisResult.analysisResult.file_check_results.generated_count)+"/"+(0,v.v_)(i.analysisResult.analysisResult.file_check_results.total_count),1)]),i.analysisResult.analysisResult.generated_files.length>0?((0,l.uX)(),(0,l.CE)("div",M,[s[17]||(s[17]=(0,l.Lk)("h5",null,"生成的文件：",-1)),(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.analysisResult.analysisResult.generated_files,a=>((0,l.uX)(),(0,l.CE)("li",{key:a.filename},(0,v.v_)(a.filename)+" ("+(0,v.v_)((a.size/1024).toFixed(1))+"KB) ",1))),128))])])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)],2)):(0,l.Q3)("",!0),(0,l.Lk)("div",K,[i.uploading||i.uploadResult?.success||i.analyzing||i.analysisResult?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:s[5]||(s[5]=(...a)=>d.triggerFileInput&&d.triggerFileInput(...a)),class:"btn btn-primary"},[...s[18]||(s[18]=[(0,l.Lk)("span",{class:"btn-icon"},"📁",-1),(0,l.eW)(" 选择文件夹 ",-1)])])),!i.uploadedFolderId||i.analyzing||i.analysisResult?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("button",{key:1,onClick:s[6]||(s[6]=(...a)=>d.startAnalysis&&d.startAnalysis(...a)),class:"btn btn-primary",disabled:i.analyzing},[s[19]||(s[19]=(0,l.Lk)("span",{class:"btn-icon"},"🚀",-1)),(0,l.eW)(" "+(0,v.v_)(i.analyzing?"分析中...":"开始分析"),1)],8,N)),i.uploadedFolderId||i.analysisResult?((0,l.uX)(),(0,l.CE)("button",{key:2,onClick:s[7]||(s[7]=(...a)=>d.resetAll&&d.resetAll(...a)),class:"btn btn-secondary"},[...s[20]||(s[20]=[(0,l.Lk)("span",{class:"btn-icon"},"🔄",-1),(0,l.eW)(" 重新开始 ",-1)])])):(0,l.Q3)("",!0)])])])])])}e(8111),e(7588);var J=e(4373);const Y=J.A.create({baseURL:"/api",timeout:3e4,headers:{"Content-Type":"application/json"}});Y.interceptors.request.use(a=>(console.log("发送请求:",a.method?.toUpperCase(),a.url),a),a=>(console.error("请求错误:",a),Promise.reject(a))),Y.interceptors.response.use(a=>(console.log("响应成功:",a.status,a.config.url),a),a=>{if(console.error("响应错误:",a.response?.status,a.message),a.response){const{status:s,data:e}=a.response;let t="请求失败";400===s?t=e.message||"请求参数错误":401===s?t="未授权访问":403===s?t="禁止访问":404===s?t="请求的资源不存在":500===s?t="服务器内部错误":s>=500&&(t="服务器错误"),a.message=t}else a.request?a.message="网络连接失败，请检查网络":a.message=a.message||"未知错误";return Promise.reject(a)});const Z=(a,s)=>Y.post("/upload-folder/",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:a=>{if(s&&a.total){const e=Math.round(100*a.loaded/a.total);s(e)}}}),aa=a=>Y.post("/start-analysis/",{folder_id:a});var sa={name:"FolderUpload",data(){return{isDragOver:!1,uploading:!1,uploadProgress:0,uploadStatus:"",uploadResult:null,selectedFiles:[],analyzing:!1,analysisStatus:"",analysisResult:null,uploadedFolderId:null,features:[{id:1,icon:"📝",title:"摘要语步分析",description:"智能提取论文摘要的四个标准语步结构"},{id:2,icon:"🏊",title:"内容分区划分",description:"将论文章节自动映射到四个标准内容分区"},{id:3,icon:"📊",title:"图表映射",description:"智能识别论文中的图表并映射到相应内容泳道"},{id:4,icon:"⚡",title:"并发处理",description:"多进程并行处理，高效分析大规模论文"},{id:5,icon:"🎯",title:"智能分析",description:"基于大语言模型的跨学科语义理解"},{id:6,icon:"📋",title:"结构化输出",description:"生成9个标准化的JSON文件，便于后续分析"}]}},methods:{triggerFileInput(){this.$refs.fileInput.click()},handleFileSelect(a){const s=Array.from(a.target.files);s.length>0&&(this.selectedFiles=s,this.startUpload(s))},handleDrop(a){a.preventDefault(),this.isDragOver=!1;const s=Array.from(a.dataTransfer.files);s.length>0&&(this.selectedFiles=s,this.startUpload(s))},async startUpload(a){this.uploading=!0,this.uploadProgress=0,this.uploadStatus="准备上传...",this.uploadResult=null;try{const s=new FormData;a.forEach(a=>{const e=a.webkitRelativePath||a.name;s.append("files",a,e)});const e=await Z(s,a=>{this.uploadProgress=a,this.uploadStatus=`上传中... ${a}%`}),t=e.data;this.uploadResult={success:!0,message:"文件夹上传成功！",folderPath:t.folder_path,folderId:t.folder_id,fileCount:t.file_count},setTimeout(()=>{this.uploadResult=null},1e5),this.uploadedFolderId=t.folder_id}catch(s){console.error("上传错误:",s),this.uploadResult={success:!1,message:`上传失败: ${s.message}`}}finally{this.uploading=!1,this.uploadProgress=100}},resetUpload(){this.uploadResult=null,this.selectedFiles=[],this.uploadProgress=0,this.uploadStatus="",this.uploadedFolderId=null},async startAnalysis(){if(this.uploadedFolderId){this.analyzing=!0,this.analysisStatus="正在启动分析流程...",this.analysisResult=null;try{const a=await aa(this.uploadedFolderId),s=a.data;this.analysisResult={success:s.success,message:s.message,analysisResult:s.analysis_result},s.success?this.analysisStatus="分析完成！":this.analysisStatus="分析失败"}catch(a){console.error("分析错误:",a),this.analysisResult={success:!1,message:`分析失败: ${a.message}`},this.analysisStatus="分析失败"}finally{this.analyzing=!1}}else alert("请先上传文件夹")},resetAll(){this.uploadResult=null,this.analysisResult=null,this.selectedFiles=[],this.uploadProgress=0,this.uploadStatus="",this.analysisStatus="",this.analyzing=!1,this.uploadedFolderId=null}}};const ea=(0,o.A)(sa,[["render",G],["__scopeId","data-v-bdebd79a"]]);var ta=ea;const la=[{path:"/",name:"Home",component:m},{path:"/about",name:"About",component:C},{path:"/upload",name:"FolderUpload",component:ta}],na=(0,c.aE)({history:(0,c.LA)("/"),routes:la});var ia=na,da=(0,g.y$)({state:{backendStatus:"unknown"},mutations:{setBackendStatus(a,s){a.backendStatus=s}},actions:{async checkBackendStatus({commit:a}){console.log("Starting backend status check...");for(let e=1;e<=3;e++)try{console.log(`Attempt ${e}: Fetching from http://localhost:8021/api/health/`);const s=await fetch("http://localhost:8021/api/health/",{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"});if(console.log("Response received:",s.status,s.statusText),console.log("Response headers:",[...s.headers.entries()]),!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const t=await s.json();return console.log("Backend response data:",t),a("setBackendStatus",t.status),void console.log("Status updated to:",t.status)}catch(s){console.error(`Attempt ${e} failed:`,s),3===e?a("setBackendStatus","error"):await new Promise(a=>setTimeout(a,1e3))}}},modules:{}});(0,t.Ef)(u).use(da).use(ia).mount("#app")}},s={};function e(t){var l=s[t];if(void 0!==l)return l.exports;var n=s[t]={exports:{}};return a[t].call(n.exports,n,n.exports,e),n.exports}e.m=a,function(){var a=[];e.O=function(s,t,l,n){if(!t){var i=1/0;for(u=0;u<a.length;u++){t=a[u][0],l=a[u][1],n=a[u][2];for(var d=!0,o=0;o<t.length;o++)(!1&n||i>=n)&&Object.keys(e.O).every(function(a){return e.O[a](t[o])})?t.splice(o--,1):(d=!1,n<i&&(i=n));if(d){a.splice(u--,1);var r=l();void 0!==r&&(s=r)}}return s}n=n||0;for(var u=a.length;u>0&&a[u-1][2]>n;u--)a[u]=a[u-1];a[u]=[t,l,n]}}(),function(){e.n=function(a){var s=a&&a.__esModule?function(){return a["default"]}:function(){return a};return e.d(s,{a:s}),s}}(),function(){e.d=function(a,s){for(var t in s)e.o(s,t)&&!e.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:s[t]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){e.o=function(a,s){return Object.prototype.hasOwnProperty.call(a,s)}}(),function(){e.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}(),function(){var a={524:0};e.O.j=function(s){return 0===a[s]};var s=function(s,t){var l,n,i=t[0],d=t[1],o=t[2],r=0;if(i.some(function(s){return 0!==a[s]})){for(l in d)e.o(d,l)&&(e.m[l]=d[l]);if(o)var u=o(e)}for(s&&s(t);r<i.length;r++)n=i[r],e.o(a,n)&&a[n]&&a[n][0](),a[n]=0;return e.O(u)},t=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))}();var t=e.O(void 0,[504],function(){return e(9261)});t=e.O(t)})();
//# sourceMappingURL=app.cd675d12.js.map